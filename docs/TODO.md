# HAR-BLE Safe Contextual Bandit å®Ÿé¨“è¨ˆç”»æ›¸

**æ–‡æ›¸ID**: RHT-EXP-PLAN-v1.2
**ä½œæˆæ—¥**: 2025-11-27
**æœ€çµ‚æ›´æ–°**: 2025-11-30
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ãƒ‰ãƒ©ãƒ•ãƒˆï¼ˆBaselineå†è¨ˆæ¸¬ä¸­ã€å®Ÿåœ°æ¤œè¨¼ã§ç™ºè¦‹ã—ãŸå•é¡Œã‚’åæ˜ ï¼‰

---

## è¨­è¨ˆãƒ¬ãƒ“ãƒ¥ãƒ¼æŒ‡æ‘˜ï¼ˆ2025-12-08 è¿½è¨˜ï¼‰

- è¨ˆæ¸¬æ–¹å¼ã®ä¸€æœ¬åŒ–: å®Ÿé¨“è¨­è¨ˆæ›¸ã®PPK-IIè¨˜è¿°ã‚’INA219+TXSD(IÂ²C)å‰æã«æƒãˆã‚‹ã€‚Î”E/advã¯per_advã€æ´»å‹•é·ç§»ç”¨ã¯åˆ¥æŒ‡æ¨™åï¼ˆä¾‹: Î¼C_transitionï¼‰ã§å¼ã‚’æ˜è¨˜ã€‚
- CCSãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿: World Modelãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé–¾å€¤(0.4/0.7)ã¨ä»Šå›å®Ÿé¨“å€¤(0.80/0.90)ã‚’åŒºåˆ¥ã—ã€ãƒ­ã‚°ã« `theta_low/high`, `model_id`, `calib_T` ã‚’å¿…é ˆå‡ºåŠ›ã€‚
- HARãƒ¢ãƒ‡ãƒ«å‰æ: Phase1ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯A0ã€A_tinyæº–å‚™ã§ãæ¬¡ç¬¬å·®ã—æ›¿ãˆOKã¨æ˜è¨˜ã€‚
- ã‚»ãƒƒã‚·ãƒ§ãƒ³é•·ã®æ•´åˆ: 10åˆ† vs 15åˆ†ã®å·®ç•°ã‚’è§£æ¶ˆï¼ˆã©ã¡ã‚‰ã‹ã«çµ±ä¸€ã€‚å¿…è¦ãªã‚‰10åˆ†Ã—2ã§15åˆ†æ‰±ã„ç­‰ãƒ«ãƒ¼ãƒ«æ±ºã‚ï¼‰ã€‚
- E1/E2ã®å…·ä½“åŒ–: ä½/é«˜å¹²æ¸‰ã‚’å ´æ‰€ãƒ»Wi-Fiæ¡ä»¶ã§ä»•æ§˜æ›¸ã«æ˜è¨˜ã€‚
- ã‚¹ã‚¯ãƒªãƒ—ãƒˆ/ãƒ­ã‚°ä»•æ§˜: `sync_logs.py`ã®SYNCæ¡ä»¶ï¼ˆçŸ­ãƒ‘ãƒ«ã‚¹ç„¡è¦–ãªã©ï¼‰ã‚’ä»•æ§˜æ›¸ã«è¨˜è¼‰ã€‚`compute_event_charge.py`ã®eventå˜ä½ã‚’per_advã‹per_transitionã‹æ˜è¨˜ã€‚ãƒ­ã‚°ã«ãƒ¢ãƒ‡ãƒ«/é–¾å€¤æƒ…å ±ã‚’å¿…ãšæ®‹ã™ã€‚
- ãƒ•ã‚§ã‚¤ãƒ«ã‚»ãƒ¼ãƒ•: Phase1ã¯è¦³æ¸¬ã®ã¿ã€Phase2ã§åˆ¶ç´„ä»˜ãBanditå®Ÿè£…ã¨æ˜è¨˜ï¼ˆPoutè¶…éæ™‚ã®æˆ»ã—æ–¹ã¯Phase2ã§å®Ÿè£…ï¼‰ã€‚
- å®Ÿé¨“Aã€œEã®ç« ç«‹ã¦ã¨æ•´åˆ: A/B=ç‰©ç†ãƒ¬ãƒ³ã‚¸ï¼ˆMode A/Bï¼‰ã€C=HARãƒ©ãƒ™ãƒ«å›ºå®šé–“éš”åŸºæº–ç·šã€D=ä¸ç¢ºå®Ÿæ€§é–¾å€¤æ–¹ç­–ï¼ˆPhase1ã‚´ãƒ¼ãƒ«ï¼‰ã€E=self-UCB/Safe Banditï¼ˆPhase2ï¼‰ã€‚ã©ã‚Œã‚’å®Ÿæ©Ÿ/ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚„ã‚‹ã‹ã‚’å®Ÿé¨“è¨ˆç”»ã«æ˜ç¤ºã€‚

---

## 0. å‰ææ¡ä»¶ã®ç¢ºèª

### 0.1 æ—¢å­˜è³‡ç”£ã®æ£šå¸ã—

- [x] **ãƒ•ã‚§ãƒ¼ã‚º0-0ãƒ‡ãƒ¼ã‚¿ã®ç¢ºèª** (2025-12-07 æ›´æ–°)
  - [x] Î”E/advå®Ÿæ¸¬å€¤ï¼ˆ100/500/1000/2000msï¼‰ â†’ Mode A/B (1202é…ç·šå¤‰æ›´å¾Œ, 1203) å†è¨ˆæ¸¬æ¸ˆã¿ã€‚æ—§å‚è€ƒ: `docs/ãƒ•ã‚§ãƒ¼ã‚º1/results/delta_energy_row1120_row1123_off.md` / `docs/ãƒ•ã‚§ãƒ¼ã‚º0-0/decision_log_2025-11-29.md`
  - [x] P_off_mean â†’ OFFè¨ˆæ¸¬11æœ¬å®Œäº†ï¼ˆé…ç·šä¿®æ­£å¾Œï¼‰ã€‚æ—§å€¤ 22.106 mW ã¯å‚è€ƒã®ã¿ã€‚
  - [x] PDRå®Ÿæ¸¬å€¤ï¼ˆp_d â‰ˆ 0.85ï¼‰ã®æ ¹æ‹ ãƒ‡ãƒ¼ã‚¿ â†’ OK (`docs/ãƒ•ã‚§ãƒ¼ã‚º1/results/pdr_row1120_txsd_rx.md`)

- [x] **HARãƒ¢ãƒ‡ãƒ«ï¼ˆA0ï¼‰ã®ç¢ºèª** (2025-11-27 å®Œäº†)
  - [x] TFLite int8ãƒ¢ãƒ‡ãƒ«ï¼ˆ90.6KBï¼‰ãŒã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ¸ˆã¿ã‹ â†’ OK (`har/004/export/acc_v1_keras/phase0-1-acc.v1.int8.tflite`)
  - [x] æ ¡æ­£ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆT=0.7443, Ï„=0.66ï¼‰ãŒç¢ºå®šã—ã¦ã„ã‚‹ã‹ â†’ OK (`har/001/docs/A0_acc_v1_baseline_summary.md`)
  - [x] Î¸_low=0.80, Î¸_high=0.90 ã®é–¾å€¤ãŒè¨­å®šæ¸ˆã¿ã‹ â†’ **èª¿æ•´æ¸ˆã¿** (`logs/threshold_adjustment_2025-11-27.md`)
    - æ—§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: Î¸_low=0.40, Î¸_high=0.70
    - mHealthã®CCSåˆ†å¸ƒãŒé«˜ã‚(0.84-0.93)ã®ãŸã‚é–¾å€¤ã‚’ä¸Šã’ã¦èª¿æ•´

- [x] **mHealthãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ç¢ºèª** (2025-11-27 å®Œäº†)
  - [x] ç”Ÿãƒ‡ãƒ¼ã‚¿ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒã‚ã‚‹ã‹ â†’ OK (`data/MHEALTHDATASET/`)
  - [x] è¢«é¨“è€…æ•°ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•°ãƒ»æ´»å‹•ãƒ©ãƒ™ãƒ«ã®æŠŠæ¡ â†’ 10åã€12æ´»å‹•ã€6,768çª“
  - [x] ãƒ‡ãƒ¼ã‚¿å‰å‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒå‹•ä½œã™ã‚‹ã‹ â†’ OK (`har/001/data_processed/subject*.npz`)

**æ£šå¸ã—ãƒ­ã‚°**: `logs/inventory_0.1_2025-11-27.md`

### 0.2 ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢æº–å‚™çŠ¶æ³

- [x] **ESP32ãƒœãƒ¼ãƒ‰** (2025-11-27 ç¢ºèª)
  - [x] å‹ç•ª: ESP32 Dev Module (3å°: TX/TXSD/RX)
  - [x] å‹•ä½œç¢ºèªæ¸ˆã¿

- [x] **é›»åŠ›è¨ˆæ¸¬** (2025-11-29 é…ç·šä¿®æ­£æ¸ˆã¿)
  - [x] **INA219æ§‹æˆã‚’ç¶™ç¶š**ï¼ˆPPK-IIã¯ä½¿ç”¨ã—ãªã„ï¼‰
  - [x] INA219 Vccé…ç·šä¿®æ­£æ¸ˆã¿ï¼ˆå¤–éƒ¨3.3Vç›´çµï¼‰
  - **æ³¨æ„**: Phase 0-0ã¨ã¯æ§‹æˆãŒç•°ãªã‚‹ï¼ˆé…ç·šä¿®æ­£å¾Œï¼‰

- [x] **Androidç«¯æœ«** (2025-11-28 ç¢ºèªå®Œäº†)
  - [x] æ©Ÿç¨®å: Galaxy S9 (SCV38)
  - [x] OSãƒãƒ¼ã‚¸ãƒ§ãƒ³: **Android 10** (One UI 2.1)
  - [x] BLEå—ä¿¡ã‚¢ãƒ—ãƒª: nRF Connect for Mobile

- [ ] **å®Ÿé¨“ç’°å¢ƒ** (ä¸€éƒ¨æœªç¢ºèª)
  - [ ] E1ï¼ˆå¹²æ¸‰å¼±ï¼‰ç’°å¢ƒ: æœªç¢ºèª
  - [x] E2ï¼ˆå¹²æ¸‰å¼·ï¼‰ç’°å¢ƒ: ç¢ºä¿æ¸ˆã¿ï¼ˆç°¡æ˜“ã«å®Ÿæ–½å¯èƒ½ï¼‰
  - [ ] è·é›¢1mã®å›ºå®šæ–¹æ³•: è¦ç¢ºèª

- [x] **é…ç·šä¿®æ­£** (2025-11-29 å®Œäº†)
  - [x] INA219 Vccé…ç·šã‚’å¤–éƒ¨3.3Vç›´çµã«ä¿®æ­£
  - [x] UARTãƒœãƒ¼ãƒ¬ãƒ¼ãƒˆ 230400â†’115200 ã«å¤‰æ›´ï¼ˆãƒã‚¤ã‚ºå¯¾ç­–ï¼‰
  - [x] è©³ç´°: `docs/ãƒ•ã‚§ãƒ¼ã‚º0-0/decision_log_2025-11-29.md`
  - **æ³¨æ„**: ä¿®æ­£å‰ã®P_off/Î”E/advã¯å‚è€ƒå€¤ã€å†è¨ˆæ¸¬ãŒå¿…è¦

**ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒ­ã‚°**: `logs/inventory_0.2_2025-11-27.md`, `docs/ãƒ•ã‚§ãƒ¼ã‚º0-0/decision_log_2025-11-29.md`

---

## 1. æº–å‚™ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆWeek 1ï¼‰

### 1.1 mHealth CCSæ™‚ç³»åˆ—ç”Ÿæˆ âœ… (2025-11-27 å®Œäº†)

**ç›®çš„**: mHealthãƒ‡ãƒ¼ã‚¿ã‹ã‚‰U, S, CCSæ™‚ç³»åˆ—ã‚’ç”Ÿæˆã—ã€ESP32ã§å†ç”Ÿå¯èƒ½ãªå½¢å¼ã«ã™ã‚‹

#### 1.1.1 HARæ¨è«–ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³æ§‹ç¯‰ âœ…

- [x] **çµ±åˆã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ**: `scripts/generate_ccs_sequences.py`
  - æ—¢å­˜ã®å‰å‡¦ç†æ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ `har/001/data_processed/subject*.npz` ã‚’ä½¿ç”¨
  - TFLite int8ãƒ¢ãƒ‡ãƒ«ã§æ¨è«– â†’ U, S, CCSè¨ˆç®— â†’ CSVå‡ºåŠ›
  - å…¨10è¢«é¨“è€…åˆ†ã®CCSæ™‚ç³»åˆ—ã‚’ç”Ÿæˆ

#### 1.1.2 CCSâ†’T_advå¤‰æ› âœ…

- [x] **ãƒ’ã‚¹ãƒ†ãƒªã‚·ã‚¹ä»˜ãå†™åƒé–¢æ•°**: `scripts/generate_ccs_sequences.py` å†…ã«å®Ÿè£…
  - **é–¾å€¤èª¿æ•´æ¸ˆã¿ (2025-11-27)**: Î¸_high=0.90, Î¸_low=0.80, hysteresis=0.05, min_stay=2.0s
  - ç†ç”±: mHealthã®CCSåˆ†å¸ƒãŒé«˜ã‚(0.84-0.93)ã®ãŸã‚ã€é–¾å€¤ã‚’ä¸Šã’ã¦é–“éš”å¤šæ§˜æ€§ã‚’ç¢ºä¿
  - å¤‰æ›´ãƒ­ã‚°: `logs/threshold_adjustment_2025-11-27.md`
- [x] **CCSæ™‚ç³»åˆ—å‡ºåŠ›**: `data/ccs_sequences/subject{01-10}_ccs.csv`

#### 1.1.3 ä»£è¡¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®é¸å®š âœ…

- [x] **ã‚»ãƒƒã‚·ãƒ§ãƒ³é¸å®šã‚¹ã‚¯ãƒªãƒ—ãƒˆ**: `scripts/create_esp32_sessions.py`
  - mHealthãƒ‡ãƒ¼ã‚¿åˆ¶ç´„ï¼ˆå„è¢«é¨“è€…ç´„11åˆ†ï¼‰ã«ã‚ˆã‚Š15åˆ†â†’**10åˆ†ã‚»ãƒƒã‚·ãƒ§ãƒ³**ã«å¤‰æ›´
  - é·ç§»å›æ•°ã€é–“éš”å¤šæ§˜æ€§ã€CCSç¯„å›²ã‚’ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã—ã¦é¸å®š

**æˆæœç‰©**:
- [x] `data/ccs_sequences/subject{01-10}_ccs.csv` - è¢«é¨“è€…åˆ¥CCSæ™‚ç³»åˆ—
- [x] `data/esp32_sessions/session_{01-10}.csv` - ESP32å†ç”Ÿç”¨10åˆ†ã‚»ãƒƒã‚·ãƒ§ãƒ³
- [x] `data/esp32_sessions/session_selection_report.md` - é¸å®šãƒ¬ãƒãƒ¼ãƒˆ
- [x] `data/esp32_sessions/session_manifest.json` - ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿

**ã‚»ãƒƒã‚·ãƒ§ãƒ³æ¦‚è¦** (10åˆ† = 600ç§’, Î¸_high=0.90, Î¸_low=0.80):
| Session | Subject | CCS Mean | Transitions | 100ms% | 500ms% | 2000ms% |
|---------|---------|----------|-------------|--------|--------|---------|
| 01 | 06 | 0.90 | 13 | 26.2% | 2.3% | 71.5% |
| 02 | 08 | 0.86 | 32 | 27.3% | 4.7% | 68.0% |
| 10 | 10 | 0.85 | 66 | 36.7% | 13.2% | 50.2% |

---

### 1.2 ESP32ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢é–‹ç™º ğŸ”§ (å®Ÿåœ°æ¤œè¨¼ã§å•é¡Œç™ºè¦‹ãƒ»ä¿®æ­£ä¸­)

**ç›®çš„**: CCSæ™‚ç³»åˆ—ã«åŸºã¥ãã€T_advã‚’å‹•çš„ã«å¤‰æ›´ã™ã‚‹ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢

**æ—¢å­˜è³‡ç”£** (Phase 0-0ã‹ã‚‰ç¶™æ‰¿ã€2025-11-29 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†ç·¨æ¸ˆã¿):
- `esp32_firmware/baseline_on/TX_BLE_Adv/` - TXé€ä¿¡+é›»æµæ¸¬å®šï¼ˆãƒãƒ«ãƒintervalè‡ªå‹•å®Ÿè¡Œå¯¾å¿œï¼‰
- `esp32_firmware/baseline_on/TXSD_PowerLogger/` - é›»åŠ›ãƒ­ã‚¬ãƒ¼
- `esp32_firmware/baseline_on/RX_BLE_to_SD/` - BLEå—ä¿¡ãƒ­ã‚¬ãƒ¼
- `esp32_firmware/baseline_off/` - OFFè¨ˆæ¸¬ç”¨ï¼ˆBLEç„¡åŠ¹ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ï¼‰
- `esp32_firmware/ccs_mode/` - CCSå‹•çš„ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒ«åˆ¶å¾¡ç”¨
- `docs/ãƒ•ã‚§ãƒ¼ã‚º0-0/decision_log_2025-11-29.md` - æœ€æ–°ã®è¨­è¨ˆæ±ºå®šãƒ­ã‚°

#### 1.2.1 åŸºæœ¬æ©Ÿèƒ½å®Ÿè£… âœ… (æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã§å¯¾å¿œ)

- [x] **BLE Advertisingåˆ¶å¾¡** - `esp32_firmware/baseline_on/TX_BLE_Adv/TX_BLE_Adv.ino`
  - ãƒãƒ«ãƒintervalè‡ªå‹•å®Ÿè¡Œï¼ˆ100â†’500â†’1000â†’2000msï¼‰
  - N_ADV_PER_TRIAL=300å›ºå®šã€intervalåˆ¥ãƒˆãƒ©ã‚¤ã‚¢ãƒ«é•·
  - INA219ã«ã‚ˆã‚‹é›»æµæ¸¬å®šã€UARTå‡ºåŠ›å®Ÿè£…æ¸ˆã¿
- [x] **ãƒ­ã‚°å‡ºåŠ›æ©Ÿèƒ½** - TXâ†’TXSDâ†’SDæ§‹æˆã§å®Ÿè£…æ¸ˆã¿
  - ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: `mv,uA` (10mså‘¨æœŸ)

#### 1.2.2 å®Ÿé¨“ãƒ¢ãƒ¼ãƒ‰å®Ÿè£… âœ… (å…¨ãƒ¢ãƒ¼ãƒ‰å®Œäº†)

- [x] **Baseline ONè¨ˆæ¸¬** - `esp32_firmware/baseline_on/` (ãƒãƒ«ãƒintervalè‡ªå‹•å®Ÿè¡Œ)
- [x] **Baseline OFFè¨ˆæ¸¬** - `esp32_firmware/baseline_off/` (60ç§’å›ºå®šçª“)
- [x] **CCSãƒ¢ãƒ¼ãƒ‰** - `esp32_firmware/ccs_mode/TX_BLE_Adv_CCS_Mode.ino`
  - `RUN_MODE` ã§ `MODE_FIXED_100` / `MODE_FIXED_2000` / `MODE_CCS` ã‚’é¸æŠ
  - CCSæ™‚ç³»åˆ—ã¯ `ccs_session_data.h` ã¨ã—ã¦å®šæ•°é…åˆ—ã«åŸ‹ã‚è¾¼ã¿
  - 1ç§’è§£åƒåº¦ã§T_advå‹•çš„å¤‰æ›´ï¼ˆ100/500/2000msï¼‰
  - BLE intervalå‹•çš„å†è¨­å®š: `adv->stop()` â†’ `setMinInterval/setMaxInterval` â†’ `adv->start()`

#### 1.2.3 åŒæœŸæ©Ÿèƒ½å®Ÿè£… âœ… (æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã§å®Ÿè£…æ¸ˆã¿)

- [x] **SYNC_OUT_PIN (GPIO25)** - ãƒˆãƒ©ã‚¤ã‚¢ãƒ«é–‹å§‹/çµ‚äº†ãƒãƒ¼ã‚«ãƒ¼
- [x] **TICK_OUT_PIN (GPIO27)** - å„åºƒå‘Šã‚¤ãƒ™ãƒ³ãƒˆã®ãƒ‘ãƒ«ã‚¹
- [x] **LED_PIN (GPIO2)** - çŠ¶æ…‹ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿

#### 1.2.4 ãƒ“ãƒ«ãƒ‰æ‰‹é †ï¼ˆCCSãƒ¢ãƒ¼ãƒ‰ï¼‰

```bash
# 1. ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ç”Ÿæˆ
python3 scripts/convert_session_to_header.py --session 01

# 2. TX_BLE_Adv_CCS_Mode.ino ã§ RUN_MODE ã‚’è¨­å®š
#    MODE_FIXED_100, MODE_FIXED_2000, MODE_CCS ã‹ã‚‰é¸æŠ

# 3. Arduino IDEã§ãƒ“ãƒ«ãƒ‰ãƒ»æ›¸ãè¾¼ã¿
#    Board: ESP32 Dev Module
```

**æˆæœç‰©ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ** (2025-11-29 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†ç·¨å¾Œ):
- [x] `esp32_firmware/baseline_on/TX_BLE_Adv/TX_BLE_Adv.ino` - ãƒãƒ«ãƒintervalè‡ªå‹•å®Ÿè¡ŒTX
- [x] `esp32_firmware/baseline_on/TXSD_PowerLogger/TXSD_PowerLogger.ino` - ONç”¨é›»åŠ›ãƒ­ã‚¬ãƒ¼
- [x] `esp32_firmware/baseline_on/RX_BLE_to_SD/RX_BLE_to_SD.ino` - BLEå—ä¿¡ãƒ­ã‚¬ãƒ¼
  - **ä¿®æ­£æ¸ˆã¿ (2025-11-30)**: USE_SYNC_END=true ã«å¤‰æ›´ï¼ˆãƒˆãƒ©ã‚¤ã‚¢ãƒ«æ•°ä¸ä¸€è‡´å•é¡Œã‚’è§£æ¶ˆï¼‰
- [x] `esp32_firmware/baseline_off/TX_BLE_OFF/TX_BLE_OFF.ino` - OFFè¨ˆæ¸¬TX
- [x] `esp32_firmware/baseline_off/TXSD_PowerLogger/TXSD_PowerLogger.ino` - OFFç”¨é›»åŠ›ãƒ­ã‚¬ãƒ¼
- [x] `esp32_firmware/ccs_mode/TX_BLE_Adv_CCS_Mode.ino` - CCSãƒ¢ãƒ¼ãƒ‰å¯¾å¿œTX
- [x] `esp32_firmware/ccs_mode/TXSD_PowerLogger_CCS_Mode.ino` - CCSãƒ¢ãƒ¼ãƒ‰å¯¾å¿œTXSD
- [x] `esp32_firmware/ccs_mode/ccs_session_data.h` - ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ï¼ˆè‡ªå‹•ç”Ÿæˆï¼‰
- [x] `scripts/convert_session_to_header.py` - CSVâ†’ãƒ˜ãƒƒãƒ€ãƒ¼å¤‰æ›ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
- [x] `docs/ãƒ•ã‚§ãƒ¼ã‚º0-0/decision_log_2025-11-29.md`ï¼ˆæœ€æ–°ã®è¨­è¨ˆæ±ºå®šãƒ­ã‚°ï¼‰

#### 1.2.5 å®Ÿåœ°æ¤œè¨¼ã§ç™ºè¦‹ã—ãŸå•é¡Œ (2025-11-30)

| å•é¡Œ | çŠ¶æ…‹ | å¯¾å¿œ |
|------|------|------|
| UARTãƒ‡ãƒ¼ã‚¿åŒ–ã‘ (230400bps) | âœ… è§£æ±º | 115200bpsã«å¤‰æ›´ |
| SYNCä¿¡å·ãƒ‘ãƒ«ã‚¹å•é¡Œ | âœ… è§£æ±º | TXå´ã§SYNC=HIGHç¶­æŒã«å¤‰æ›´ |
| RXãƒˆãƒ©ã‚¤ã‚¢ãƒ«æ•°ä¸ä¸€è‡´ | âœ… ä¿®æ­£æ¸ˆã¿ | USE_SYNC_END=true (è¦å†æ›¸ãè¾¼ã¿) |
| TXSD SD open FAIL | âœ… è§£æ±º | SDã‚«ãƒ¼ãƒ‰æ¥è§¦/ãƒ•ã‚¡ã‚¤ãƒ«æ•°ç¢ºèªã§è§£æ¶ˆ |
| TXSD SD init FAIL | âœ… è§£æ±º | é›»æºå†æŠ•å…¥ã§è§£æ¶ˆ |

**è©³ç´°**: `docs/ãƒ•ã‚§ãƒ¼ã‚º0-0/decision_log_2025-11-29.md`

---

### 1.3 Androidå—ä¿¡ã‚¢ãƒ—ãƒªæº–å‚™ âœ… (nRF Connectä½¿ç”¨)

**ç›®çš„**: BLEåºƒå‘Šã‚’å—ä¿¡ã—ã€ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ä»˜ãã§ãƒ­ã‚°ã‚’è¨˜éŒ²

**ä½¿ç”¨ã‚¢ãƒ—ãƒª**: **nRF Connect for Mobile** (Nordic Semiconductor)
- Google Play: https://play.google.com/store/apps/details?id=no.nordicsemi.android.mcp

#### 1.3.1 nRF Connectè¨­å®š

- [x] **ã‚¹ã‚­ãƒ£ãƒ³è¨­å®š**
  - Scanner â†’ Settings â†’ Scan mode: Low Latency
  - ãƒ•ã‚£ãƒ«ã‚¿: "TXM_ESP32" (ãƒ‡ãƒã‚¤ã‚¹å)

- [x] **ãƒ­ã‚°è¨˜éŒ²é …ç›®** (nRF Connectã§è‡ªå‹•å–å¾—)
  - ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—
  - RSSI
  - Advertising Data (Manufacturer Specific Dataå«ã‚€)

- [x] **ãƒ­ã‚°å‡ºåŠ›**
  - Scanner â†’ Export â†’ CSVå½¢å¼

#### 1.3.2 é‹ç”¨æ‰‹é †

1. nRF Connectã‚’èµ·å‹•
2. Scannerç”»é¢ã§ãƒ•ã‚£ãƒ«ã‚¿è¨­å®šï¼ˆ"TXM_ESP32"ï¼‰
3. ã‚¹ã‚­ãƒ£ãƒ³é–‹å§‹
4. å®Ÿé¨“çµ‚äº†å¾Œã€Export â†’ CSVã§ä¿å­˜

**æˆæœç‰©ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [x] ä½¿ç”¨ã‚¢ãƒ—ãƒª: nRF Connect for Mobile
- [ ] ãƒ­ã‚°ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ã‚µãƒ³ãƒ—ãƒ«å–å¾—ï¼ˆå®Ÿé¨“æ™‚ã«ç¢ºèªï¼‰

---

### 1.4 é›»åŠ›è¨ˆæ¸¬ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— ğŸ”§ (é…ç·šä¿®æ­£æ¸ˆã¿ã€å†æ ¡æ­£ä¸­)

**ç›®çš„**: INA219ã§ESP32ã®é›»åŠ›ã‚’æ­£ç¢ºã«è¨ˆæ¸¬ã™ã‚‹ï¼ˆPPK-IIã¯ä½¿ç”¨ã—ãªã„ï¼‰

**æ—¢å­˜è³‡ç”£**: `docs/ãƒ•ã‚§ãƒ¼ã‚º0-0/decision_log_2025-11-29.md` ã«æœ€æ–°æ§‹æˆã‚’è¨˜è¼‰

#### 1.4.1 é…ç·š âœ… (2025-11-29 ä¿®æ­£æ¸ˆã¿)

- [x] ESP32 3V3ãƒ”ãƒ³ã¸ã®å¤–éƒ¨é›»æºä¾›çµ¦ï¼ˆINA219çµŒç”±ï¼‰
- [x] INA219 VIN+/VIN-ã§é›»æµæ¸¬å®š
- [x] GNDå…±é€šåŒ–ï¼ˆTX/TXSD/RX/å¤–éƒ¨é›»æºï¼‰
- [x] **INA219 Vccé…ç·šä¿®æ­£**: å¤–éƒ¨3.3Vç›´çµï¼ˆæ—§: Vin-åˆ†å²ã§ãƒ–ãƒ©ã‚¦ãƒ³ã‚¢ã‚¦ãƒˆç™ºç”Ÿï¼‰

#### 1.4.2 è¨ˆæ¸¬è¨­å®š âœ… (æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã§å®Ÿè£…æ¸ˆã¿)

- [x] ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ãƒ¬ãƒ¼ãƒˆ: 100Hz (10mså‘¨æœŸ)
- [x] UARTå‡ºåŠ›: `mv,uA` å½¢å¼
- [x] TXSDã§SDã‚«ãƒ¼ãƒ‰ã«è¨˜éŒ²

#### 1.4.3 å‹•ä½œç¢ºèª (å†è¨ˆæ¸¬ä¸­ 2025-11-30)

- [x] Phase 0-0ã§å®Ÿæ–½æ¸ˆã¿ï¼ˆ**é…ç·šä¿®æ­£å‰ã®ãŸã‚å‚è€ƒå€¤**ï¼‰
  - æ—§Î”E/adv: `docs/ãƒ•ã‚§ãƒ¼ã‚º1/results/delta_energy_row1120_row1123_off.md`
  - æ—§P_off = 22.106 mW
- [ ] **é…ç·šä¿®æ­£å¾Œã®å†è¨ˆæ¸¬** (é€²è¡Œä¸­)
  - [x] OFFè¨ˆæ¸¬å®Œäº† (11 trials) â†’ P_offå†ç®—å‡ºå¾…ã¡
  - [ ] ONè¨ˆæ¸¬ (100/500/1000/2000ms è‡ªå‹•å®Ÿè¡Œä¸­)
  - [ ] è§£æã‚¹ã‚¯ãƒªãƒ—ãƒˆ: `scripts/analyze_baseline_v2.py`
- [ ] Phase 1å®Ÿé¨“å‰ã®æœ€çµ‚æ ¡æ­£
  - æ—§åŸºæº–å€¤ (100ms): Î”E/adv = 2256.82 ÂµJï¼ˆå‚è€ƒï¼‰
  - æ–°åŸºæº–å€¤: å†è¨ˆæ¸¬å¾Œã«ç¢ºå®š

**æˆæœç‰©ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [x] é…ç·šå›³: `docs/ãƒ•ã‚§ãƒ¼ã‚º0-0/decision_log_2025-11-29.md` ã‚»ã‚¯ã‚·ãƒ§ãƒ³2
- [ ] å†è¨ˆæ¸¬ãƒ¬ãƒãƒ¼ãƒˆï¼ˆBaseline ON/OFFï¼‰
- [ ] Phase 1æ ¡æ­£ç¢ºèªãƒ¬ãƒãƒ¼ãƒˆ

---

## 2. å®Ÿé¨“å®Ÿæ–½ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆWeek 2-3ï¼‰

### 2.1 å®Ÿé¨“ãƒ—ãƒ­ãƒˆã‚³ãƒ«

#### 2.1.1 ã‚»ãƒƒã‚·ãƒ§ãƒ³æ‰‹é †

**æ³¨æ„: è¨ˆæ¸¬ã‚¿ã‚¤ãƒ—ã«ã‚ˆã‚Šã‚»ãƒƒã‚·ãƒ§ãƒ³é•·ãŒç•°ãªã‚‹**

| è¨ˆæ¸¬ã‚¿ã‚¤ãƒ— | ã‚»ãƒƒã‚·ãƒ§ãƒ³é•· | èª¬æ˜ |
|------------|-------------|------|
| **Baseline ONè¨ˆæ¸¬** | intervalä¾å­˜ | N_ADV=300å›ºå®šã€100msâ†’30s, 500msâ†’150s, 1000msâ†’5min, 2000msâ†’10min |
| **Baseline OFFè¨ˆæ¸¬** | 60ç§’å›ºå®š | P_offç®—å‡ºç”¨ |
| **CCSãƒ¢ãƒ¼ãƒ‰** | 10åˆ†å›ºå®š | mHealthã‚»ãƒƒã‚·ãƒ§ãƒ³å†ç”Ÿï¼ˆmHealthãƒ‡ãƒ¼ã‚¿åˆ¶ç´„ã«ã‚ˆã‚Š15åˆ†â†’10åˆ†ï¼‰|

```
[é–‹å§‹å‰]
1. ESP32ã«CCSæ™‚ç³»åˆ—ã‚’ãƒ“ãƒ«ãƒ‰ï¼ˆCCSãƒ¢ãƒ¼ãƒ‰ã®å ´åˆï¼‰
2. ESP32ã®ãƒ¢ãƒ¼ãƒ‰é¸æŠï¼ˆFIXED-100 / FIXED-2000 / CCSï¼‰
3. Androidå—ä¿¡ã‚¢ãƒ—ãƒªèµ·å‹•ã€ãƒ­ã‚°è¨˜éŒ²é–‹å§‹
4. INA219è¨ˆæ¸¬æº–å‚™ï¼ˆTXâ†’TXSDæ§‹æˆï¼‰
5. ESP32é›»æºON

[ã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸­]
6. åŒæœŸãƒãƒ¼ã‚«ãƒ¼ï¼ˆSYNC_OUT HIGHâ†’LOWï¼‰ã‚’è¨˜éŒ²
7. 10åˆ†é–“å¾…æ©Ÿï¼ˆä»‹å…¥ãªã—ï¼‰
8. çµ‚äº†ãƒãƒ¼ã‚«ãƒ¼ã‚’è¨˜éŒ²

[çµ‚äº†å¾Œ]
9. ESP32é›»æºOFF
10. TXSD SDã‚«ãƒ¼ãƒ‰ã‹ã‚‰é›»åŠ›ãƒ­ã‚°å›å
11. Androidãƒ­ã‚°ä¿å­˜
12. RX SDã‚«ãƒ¼ãƒ‰ã‹ã‚‰BLEå—ä¿¡ãƒ­ã‚°å›å
13. ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ã‚»ãƒƒã‚·ãƒ§ãƒ³IDã§ãƒªãƒãƒ¼ãƒ 
```

#### 2.1.2 å‘½åè¦å‰‡

```
ã‚»ãƒƒã‚·ãƒ§ãƒ³ID: {env}_{condition}_{rep}
ä¾‹: E1_FIXED100_01, E2_CCS_05

ãƒ•ã‚¡ã‚¤ãƒ«å:
- é€ä¿¡ãƒ­ã‚°: tx_{session_id}.csv
- å—ä¿¡ãƒ­ã‚°: rx_{session_id}.csv
- é›»åŠ›ãƒ­ã‚°: pwr_{session_id}.csv
```

### 2.2 å®Ÿé¨“ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

#### Week 2: E1ç’°å¢ƒï¼ˆ30ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰

| æ—¥ | æ¡ä»¶ | ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•° | ç´¯è¨ˆ |
|----|------|-------------|------|
| Day 1 | FIXED-100 | 10 | 10 |
| Day 2 | FIXED-2000 | 10 | 20 |
| Day 3 | CCS | 10 | 30 |

- [ ] Day 1 å®Œäº†
- [ ] Day 2 å®Œäº†
- [ ] Day 3 å®Œäº†
- [ ] E1ãƒ‡ãƒ¼ã‚¿ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å®Œäº†

#### Week 3å‰åŠ: E2ç’°å¢ƒï¼ˆ30ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰

| æ—¥ | æ¡ä»¶ | ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•° | ç´¯è¨ˆ |
|----|------|-------------|------|
| Day 4 | FIXED-100 | 10 | 40 |
| Day 5 | FIXED-2000 | 10 | 50 |
| Day 6 | CCS | 10 | 60 |

- [ ] Day 4 å®Œäº†
- [ ] Day 5 å®Œäº†
- [ ] Day 6 å®Œäº†
- [ ] E2ãƒ‡ãƒ¼ã‚¿ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å®Œäº†

### 2.3 å“è³ªç®¡ç†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

å„ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†å¾Œã«ç¢ºèª:

- [ ] é€ä¿¡ãƒ­ã‚°ã®adv_countãŒæœŸå¾…å€¤Â±5%ä»¥å†…
- [ ] å—ä¿¡ãƒ­ã‚°ã®rx_countãŒadv_countã®70%ä»¥ä¸Š
- [ ] é›»åŠ›ãƒ­ã‚°ã«ç•°å¸¸ã‚¹ãƒ‘ã‚¤ã‚¯ï¼ˆ>100mAï¼‰ãŒãªã„ã‹
- [ ] åŒæœŸãƒãƒ¼ã‚«ãƒ¼ãŒé€ä¿¡ãƒ»å—ä¿¡ãƒ»é›»åŠ›ãƒ­ã‚°ã§ä¸€è‡´
- [ ] CCSãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã€T_advé·ç§»ãŒç™ºç”Ÿã—ã¦ã„ã‚‹ã‹

**ç•°å¸¸æ™‚ã®å¯¾å¿œ**:
- ãƒ­ã‚°æ¬ æ â†’ ã‚»ãƒƒã‚·ãƒ§ãƒ³å†å®Ÿæ–½
- é›»åŠ›ç•°å¸¸ â†’ é…ç·šç¢ºèªå¾Œã€å†å®Ÿæ–½
- åŒæœŸãšã‚Œ â†’ æ‰‹å‹•è£œæ­£ or å†å®Ÿæ–½

---

## 3. ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆWeek 3å¾ŒåŠï¼‰

### 3.1 ãƒ‡ãƒ¼ã‚¿çµ±åˆ

- [ ] **ãƒ­ã‚°åŒæœŸ**
  - é€ä¿¡ãƒ»å—ä¿¡ãƒ»é›»åŠ›ãƒ­ã‚°ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’çµ±ä¸€
  - åŒæœŸãƒãƒ¼ã‚«ãƒ¼ã‚’åŸºæº–ã«ã‚ªãƒ•ã‚»ãƒƒãƒˆè£œæ­£
  - ãƒ•ã‚¡ã‚¤ãƒ«: `scripts/sync_logs.py`

- [ ] **ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆä½œæˆ**
  - å…¨60ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä¸€è¦§
  - é™¤å¤–ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒã‚ã‚Œã°ãƒ•ãƒ©ã‚°ä»˜ä¸
  - ãƒ•ã‚¡ã‚¤ãƒ«: `data/experiments_manifest.yaml`

### 3.2 KPIç®—å‡º

#### 3.2.1 ã‚¨ãƒãƒ«ã‚®ãƒ¼æŒ‡æ¨™ã®åˆ†é›¢

- [ ] **Î¼C_adv (mJ/adv)** : Î”E/adv = (E_on âˆ’ P_offÃ—T) / N_advï¼ˆç‰©ç†å±¤ã®åŸºæº–ã€‚FIXED/CCSå…±é€šï¼‰
- [ ] **Î¼C_transition (mJ/transition)** : æ´»å‹•é·ç§»åŒºé–“ã®Î”Eã‚’é·ç§»å›æ•°ã§å‰²ã‚‹ï¼ˆCCS/FIXEDã§æ¯”è¼ƒï¼‰
- [ ] ã‚¹ã‚¯ãƒªãƒ—ãƒˆ/ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ per_adv ã¨ per_transition ã‚’æ˜è¨˜ã—ã€åå‰ã‚’æƒãˆã‚‹ï¼ˆæ—§ã€ŒÎ¼C/eventã€ã¯ per_adv ã«ä¸€æœ¬åŒ–ã™ã‚‹ã‹ä¸Šè¨˜2åˆ†å‰²ã§ï¼‰

- [ ] **é›»è·è¨ˆç®—**
  ```python
  def compute_event_charge(power_log, events, P_off=22.106):
      results = []
      for event in events:
          t_start, t_end = event['start'], event['end']
          segment = power_log[(power_log.t >= t_start) & (power_log.t < t_end)]
          E_on = integrate(segment.current_mA) * segment.duration_s  # mJ
          E_idle = P_off * segment.duration_s / 1000  # mJ
          mu_c = (E_on - E_idle) / event['adv_count']  # mJ/adv
          results.append(mu_c)
      return results
  ```
  - ãƒ•ã‚¡ã‚¤ãƒ«: `scripts/compute_event_charge.py`

#### 3.2.2 Pout(Ï„)ç®—å‡º

- [ ] **TLï¼ˆæ¤œçŸ¥é…å»¶ï¼‰è¨ˆç®—**
  ```python
  def compute_tl(tx_log, rx_log, events):
      results = []
      for event in events:
          t_event = event['start']
          # ã‚¤ãƒ™ãƒ³ãƒˆå¾Œã®æœ€åˆã®å—ä¿¡ã‚’æ¢ã™
          rx_after = rx_log[rx_log.t > t_event]
          if len(rx_after) > 0:
              t_first_rx = rx_after.iloc[0].t
              tl = t_first_rx - t_event
          else:
              tl = float('inf')  # æœªå—ä¿¡
          results.append(tl)
      return results
  ```

- [ ] **Poutè¨ˆç®—**
  ```python
  def compute_pout(tl_list, tau=2.0):
      violations = sum(1 for tl in tl_list if tl > tau)
      return violations / len(tl_list)
  ```
  - ãƒ•ã‚¡ã‚¤ãƒ«: `scripts/compute_pout.py`

#### 3.2.3 é›†è¨ˆ

- [ ] **æ¡ä»¶åˆ¥é›†è¨ˆ**
  ```
  | æ¡ä»¶ | ç’°å¢ƒ | Î¼C/event (meanÂ±std) | Pout(2s) | N |
  |------|------|---------------------|----------|---|
  | FIXED-100 | E1 | x.xx Â± x.xx | x.xx% | 10 |
  | FIXED-100 | E2 | x.xx Â± x.xx | x.xx% | 10 |
  | FIXED-2000 | E1 | x.xx Â± x.xx | x.xx% | 10 |
  | FIXED-2000 | E2 | x.xx Â± x.xx | x.xx% | 10 |
  | CCS | E1 | x.xx Â± x.xx | x.xx% | 10 |
  | CCS | E2 | x.xx Â± x.xx | x.xx% | 10 |
  ```
  - ãƒ•ã‚¡ã‚¤ãƒ«: `results/kpi_summary.csv`

### 3.3 å›³è¡¨ä½œæˆ

- [ ] **Figure 1: Pout-Î¼Cãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•æ›²ç·š**
  - Xè»¸: Î¼C/event [mJ]
  - Yè»¸: Pout(Ï„=2s) [%]
  - ãƒ—ãƒ­ãƒƒãƒˆ: 6ç‚¹ï¼ˆ3æ¡ä»¶Ã—2ç’°å¢ƒï¼‰+ èª¤å·®ãƒãƒ¼
  - ç†è«–æ›²ç·š: Pout = (1-p_d)^âŒŠÏ„/T_advâŒ‹ ã‚’é‡ã­ã‚‹

- [ ] **Figure 2: CCSåˆ¶å¾¡ã®æ™‚ç³»åˆ—ä¾‹**
  - ä¸Šæ®µ: CCS(t)ã¨T_adv(t)
  - ä¸‹æ®µ: é›»æµæ³¢å½¢
  - 1ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ†ã®ä»£è¡¨ä¾‹

- [ ] **Figure 3: çœã‚¨ãƒç‡ã®æ¯”è¼ƒ**
  - æ£’ã‚°ãƒ©ãƒ•: FIXED-100åŸºæº–ã®çœã‚¨ãƒç‡
  - E1/E2ã‚’ä¸¦ã¹ã¦è¡¨ç¤º

- [ ] **Table 1: å®Ÿé¨“æ¡ä»¶**
- [ ] **Table 2: KPIé›†è¨ˆçµæœ**

**æˆæœç‰©ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] `figures/fig1_tradeoff.pdf`
- [ ] `figures/fig2_timeseries.pdf`
- [ ] `figures/fig3_energy_saving.pdf`
- [ ] `results/kpi_summary.csv`
- [ ] `results/statistical_tests.md`ï¼ˆtæ¤œå®šç­‰ï¼‰

---

## 4. åŸ·ç­†ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆWeek 4ï¼‰

### 4.1 è«–æ–‡æ§‹æˆï¼ˆIEICE ComEXæƒ³å®šã€4ãƒšãƒ¼ã‚¸ï¼‰

```
1. Introduction (0.5p)
   - èƒŒæ™¯: ã‚¦ã‚§ã‚¢ãƒ©ãƒ–ãƒ«HAR + BLEé€šä¿¡ã®èª²é¡Œ
   - å•é¡Œ: å›ºå®šåºƒå‘Šé–“éš”ã®éåŠ¹ç‡æ€§
   - ææ¡ˆ: HARä¸ç¢ºå®Ÿåº¦ã«åŸºã¥ãé©å¿œåˆ¶å¾¡
   - è²¢çŒ®: 3ç‚¹

2. System Model (0.75p)
   - 2.1 Problem Formulationï¼ˆSafe Banditå®šå¼åŒ–ï¼‰
   - 2.2 CCS-based Policyï¼ˆæ±ºã‚æ‰“ã¡ãƒ«ãƒ¼ãƒ«ï¼‰
   - 2.3 Pout(Ï„) Modelï¼ˆç†è«–å¼ï¼‰

3. Experimental Setup (0.5p)
   - 3.1 Hardware Configuration
   - 3.2 mHealth Dataset
   - 3.3 Evaluation Metrics

4. Results (1.0p)
   - 4.1 Energy Reduction
   - 4.2 Pout-Î¼C Tradeoff
   - 4.3 Model Validation

5. Conclusion (0.25p)
   - ã¾ã¨ã‚
   - Future Work: Safe Contextual Banditã¸ã®æ‹¡å¼µ

References (~15ä»¶)
```

### 4.2 åŸ·ç­†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] **Introduction**
  - [ ] èƒŒæ™¯ã®è¨˜è¿°ï¼ˆå…ˆè¡Œç ”ç©¶3-5ä»¶å¼•ç”¨ï¼‰
  - [ ] å•é¡Œè¨­å®šã®æ˜ç¢ºåŒ–
  - [ ] è²¢çŒ®ã®3ç‚¹ãƒªã‚¹ãƒˆ

- [ ] **System Model**
  - [ ] æ•°å¼ã®æ•´åˆæ€§ç¢ºèª
  - [ ] è¨˜å·è¡¨ã®ä½œæˆ
  - [ ] å›³1ï¼ˆã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³ï¼‰ã®ä½œæˆ

- [ ] **Experimental Setup**
  - [ ] ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ä»•æ§˜ã®è¨˜è¼‰
  - [ ] ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆæƒ…å ±ã®è¨˜è¼‰
  - [ ] å†ç¾å¯èƒ½ãªå®Ÿé¨“æ¡ä»¶ã®è¨˜è¿°

- [ ] **Results**
  - [ ] å›³è¡¨ã®æŒ¿å…¥
  - [ ] çµ±è¨ˆçš„æœ‰æ„æ€§ã®è¨˜è¼‰ï¼ˆã‚ã‚Œã°ï¼‰
  - [ ] è€ƒå¯Ÿã®è¨˜è¿°

- [ ] **Conclusion**
  - [ ] ä¸»è¦çµæœã®è¦ç´„
  - [ ] Future Workã®æ˜è¨˜

- [ ] **ãã®ä»–**
  - [ ] è‹±æ–‡æ ¡æ­£
  - [ ] ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆç¢ºèªï¼ˆIEICE ComEX templateï¼‰
  - [ ] å‚è€ƒæ–‡çŒ®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆç¢ºèª

---

## 5. ãƒªã‚¹ã‚¯ç®¡ç†

### 5.1 æŠ€è¡“ãƒªã‚¹ã‚¯

| ãƒªã‚¹ã‚¯ | å½±éŸ¿ | å¯¾ç­– |
|--------|------|------|
| ESP32ã®T_advå‹•çš„å¤‰æ›´ãŒä¸å®‰å®š | å®Ÿé¨“ä¸å¯ | äº‹å‰ã«100ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ†ã®å®‰å®šæ€§ãƒ†ã‚¹ãƒˆ |
| Androidå—ä¿¡æ¼ã‚Œ | Poutéå¤§è©•ä¾¡ | LOW_LATENCYãƒ¢ãƒ¼ãƒ‰å›ºå®šã€ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰å‡¦ç†åœæ­¢ |
| TXSD/INA219ãƒ­ã‚°ã®åŒæœŸãšã‚Œ | Î¼Cç®—å‡ºèª¤å·® | GPIOãƒãƒ¼ã‚«ãƒ¼ã§Â±10msä»¥å†…ã«è£œæ­£ |
| mHealthã®CCSåˆ†å¸ƒãŒåã‚‹ | åŠ¹æœãŒè¦‹ãˆãªã„ | äº‹å‰ã«CCSåˆ†å¸ƒã‚’ç¢ºèªã€å¿…è¦ãªã‚‰è¤‡æ•°è¢«é¨“è€…ä½¿ç”¨ |

### 5.2 ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒªã‚¹ã‚¯

| ãƒªã‚¹ã‚¯ | å½±éŸ¿ | å¯¾ç­– |
|--------|------|------|
| æº–å‚™ãŒé…å»¶ | å®Ÿé¨“æœŸé–“åœ§ç¸® | Week1ã§æœ€ä½é™å‹•ãçŠ¶æ…‹ã‚’å„ªå…ˆ |
| å®Ÿé¨“ç’°å¢ƒãŒä½¿ãˆãªã„ | å®Ÿé¨“ä¸å¯ | ä»£æ›¿ç’°å¢ƒã‚’äº‹å‰ã«ç¢ºä¿ |
| ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã§å•é¡Œç™ºè¦š | å†å®Ÿé¨“ | æ¯æ—¥ã®å“è³ªãƒã‚§ãƒƒã‚¯ã§æ—©æœŸç™ºè¦‹ |

### 5.3 Goã‚µã‚¤ãƒ³åˆ¤å®šåŸºæº–

**Week 1çµ‚äº†æ™‚ç‚¹ã§ä»¥ä¸‹ãŒæƒã£ã¦ã„ã‚Œã°Go**:
- [ ] CCSæ™‚ç³»åˆ—10ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ†ãŒç”Ÿæˆæ¸ˆã¿
- [ ] ESP32ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ãŒ3ãƒ¢ãƒ¼ãƒ‰ã§å‹•ä½œ
- [ ] Androidå—ä¿¡ãƒ­ã‚°ãŒæ­£å¸¸ã«å–ã‚Œã‚‹
- [ ] INA219ã§ã®é›»åŠ›è¨ˆæ¸¬ãŒãƒ•ã‚§ãƒ¼ã‚º0-0(å†è¨ˆæ¸¬)ã¨æ•´åˆ

**æƒã£ã¦ã„ãªã„å ´åˆ**:
- ä¸è¶³åˆ†ã®å„ªå…ˆå¯¾å¿œ
- å®Ÿé¨“ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å¾Œã‚å€’ã—
- æœ€æ‚ªã€ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•°ã‚’30ã«å‰Šæ¸›ï¼ˆ5åå¾©ï¼‰

---

## 6. æˆæœç‰©ä¸€è¦§

### ã‚³ãƒ¼ãƒ‰

**CCSç”Ÿæˆï¼ˆå®Œäº†ï¼‰**:
- [x] `scripts/generate_ccs_sequences.py` - TFLiteæ¨è«–+U/S/CCSè¨ˆç®—+æ™‚ç³»åˆ—å‡ºåŠ›
- [x] `scripts/create_esp32_sessions.py` - ESP32ç”¨ã‚»ãƒƒã‚·ãƒ§ãƒ³é¸å®š

**ESP32ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ï¼ˆå®Œäº†ã€2025-11-29 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†ç·¨æ¸ˆã¿ï¼‰**:
- [x] `esp32_firmware/baseline_on/` - ãƒãƒ«ãƒintervalè‡ªå‹•å®Ÿè¡Œï¼ˆTX/TXSD/RXï¼‰
- [x] `esp32_firmware/baseline_off/` - OFFè¨ˆæ¸¬ï¼ˆTX/TXSDï¼‰
- [x] `esp32_firmware/ccs_mode/` - CCSãƒ¢ãƒ¼ãƒ‰ï¼ˆTX/TXSD/RX + ccs_session_data.hï¼‰
- [x] ãƒãƒƒã‚·ãƒ¥è¨˜éŒ²: `docs/ãƒ•ã‚§ãƒ¼ã‚º0-0/decision_log_2025-11-29.md` Section 7

**ãƒ‡ãƒ¼ã‚¿å‡¦ç†ï¼ˆæœªå®Ÿè£…ï¼‰**:
- [ ] `scripts/sync_logs.py` - TX/RX/é›»åŠ›ãƒ­ã‚°ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—çµ±ä¸€
- [ ] `scripts/compute_event_charge.py` - Î¼C/eventç®—å‡º
- [ ] `scripts/compute_pout.py` - Pout(Ï„)ç®—å‡º

**æš«å®šä»£æ›¿**: `scripts/analyze_baseline_v2.py` ã§baseline ON/OFFè¨ˆæ¸¬ã®Î”E/advç®—å‡ºã¯å¯èƒ½

### ãƒ‡ãƒ¼ã‚¿

**CCSæ™‚ç³»åˆ—ï¼ˆå®Œäº†ï¼‰**:
- [x] `data/ccs_sequences/subject{01-10}_ccs.csv`
- [x] `data/ccs_sequences/generation_summary.json`
- [x] `data/esp32_sessions/session_{01-10}.csv`
- [x] `data/esp32_sessions/session_manifest.json`
- [x] `data/esp32_sessions/session_selection_report.md`

**å®Ÿé¨“ãƒ‡ãƒ¼ã‚¿ï¼ˆæœªå–å¾—ï¼‰**:
- [ ] `data/raw/E1/`, `data/raw/E2/`
- [ ] `data/experiments_manifest.yaml`

### çµæœ
- [ ] `results/kpi_summary.csv`
- [ ] `results/statistical_tests.md`
- [ ] `figures/fig1_tradeoff.pdf`
- [ ] `figures/fig2_timeseries.pdf`
- [ ] `figures/fig3_energy_saving.pdf`

### æ–‡æ›¸
- [x] `data/esp32_sessions/session_selection_report.md`
- [ ] `docs/experiment_log.md`
- [ ] `paper/main.tex`

---

## æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

**å®Œäº†æ¸ˆã¿ï¼ˆ2025-11-27ï¼‰**:
- [x] 0.1 æ—¢å­˜è³‡ç”£ã®æ£šå¸ã—
- [x] 0.2 ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢æº–å‚™çŠ¶æ³ã®ç¢ºèª
- [x] 1.1 mHealth CCSæ™‚ç³»åˆ—ç”Ÿæˆ
- [x] é–¾å€¤èª¿æ•´ï¼ˆÎ¸_high=0.90, Î¸_low=0.80ï¼‰

**æ®‹ã‚¿ã‚¹ã‚¯**:
1. [x] ~~1.2 CCSãƒ¢ãƒ¼ãƒ‰æ‹¡å¼µ~~ (2025-11-28 å®Œäº†)
2. [x] ~~1.3 Androidå—ä¿¡ã‚¢ãƒ—ãƒª~~ â†’ nRF Connectä½¿ç”¨ (2025-11-28 æ±ºå®š)
3. [x] ~~0.2 Android OSãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª~~ â†’ Android 10 (2025-11-28 ç¢ºèª)
4. [x] ~~é…ç·šä¿®æ­£~~ â†’ INA219 Vccç›´çµã€UART 115200bps (2025-11-29 å®Œäº†)
5. [ ] **Baselineå†è¨ˆæ¸¬** (é€²è¡Œä¸­ 2025-11-30)
   - [x] OFFè¨ˆæ¸¬å®Œäº† (11 trials)
   - [ ] ONè¨ˆæ¸¬ (100/500/1000/2000ms è‡ªå‹•å®Ÿè¡Œä¸­)
6. [ ] 1.4.3 P_off/Î”E/advå†æ ¡æ­£ï¼ˆBaselineå†è¨ˆæ¸¬ãƒ‡ãƒ¼ã‚¿ã§ç®—å‡ºï¼‰
7. [ ] 0.2 E1ç’°å¢ƒç¢ºèªã€è·é›¢1mãƒãƒ¼ã‚­ãƒ³ã‚°ç¢ºèª

### ç·Šæ€¥å¯¾å¿œï¼ˆMode C2â€²å†è¨ˆæ¸¬ãƒ»SYNCå®‰å®šåŒ–ï¼‰â€»2025-12-07è¿½è¨˜
- [ ] labels_all.h ã‚’100msç‰ˆã§å†ç”Ÿæˆï¼ˆsubject01â‰’6946ãªã©ã€å„6.3kã€œ7.0kï¼‰
- [ ] TX: trialçµ‚äº†å¾Œã«SYNC LOWã‚’æ•°ç™¾msä¿æŒ â†’ æ¬¡trialé–‹å§‹ã‚’é…å»¶ã•ã›ã€RX/TXSDãŒå¢ƒç•Œã‚’ç¢ºå®Ÿã«æ¤œå‡º
- [ ] TXSD/RX: SYNC=26ã§é–‹å§‹/çµ‚äº†ã‚’ç¢ºèªï¼ˆãƒ­ã‚°ã« sync=1â†’0 ãŒå‡ºã‚‹ã“ã¨ï¼‰
- [ ] REPEAT=3æ™‚ã®æ‰€è¦æ™‚é–“ â‰’ 2.1h/è¢«é¨“è€…ï¼ˆ4åŒºé–“Ã—3å›Ã—ç´„10.6åˆ†ï¼‰â†’ é•·æ™‚é–“æ”¾ç½®ã§ã‚‚12æœ¬ã«åˆ†å‰²ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- [ ] æœŸå¾…adv_countç›®å®‰: 100msâ‰’6352, 500msâ‰’1271, 1000msâ‰’636, 2000msâ‰’318ï¼ˆREPEAT=3ã§ç·è¨ˆâ‰’25.7kï¼‰
- [ ] ã‚·ãƒªã‚¢ãƒ«ã§ â€œall trials completedâ€ ã‚’ç¢ºèªã€‚ãƒªã‚»ãƒƒãƒˆãƒ»SYNCæŠœã‘ã‚’ãƒã‚§ãƒƒã‚¯

---

*Last updated: 2025-11-30*
