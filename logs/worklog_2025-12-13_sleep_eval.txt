2025-12-13
- [15:40 JST] sleep_eval_scan90 firmware整備（Step1: sleep効果最大見積り用）: TX/RXを「単位の取り扱い」と「本当にその間隔で動いているか」の観点で修正。TXは controller に広告間隔を設定（0.625ms単位変換）し、CPU側の100ms周期ペイロード更新を廃止、trial開始/終了で adv->start/stop と SYNC を揃える最小ダミー広告版に刷新（LED/TICK/Serial/SDをデフォルト無効）。RXはscan interval/windowを0.625ms単位に明示変換してscan90%意図（100ms/90ms）を保証。更新ファイル: sleep_eval_scan90/src/tx/TX_ModeC2prime_1210.ino, sleep_eval_scan90/src/tx/TX_ModeC2prime_1210/TX_ModeC2prime_1210.ino, sleep_eval_scan90/src/rx/RX_ModeC2prime_1210/RX_ModeC2prime_1210.ino, sleep_eval_scan90/README.md。
- [15:42 JST] 追加: .gitignore に repomix-output.* を追加（sleep_eval_scan90配下の生成物混入防止）。
- [15:58 JST] 注意追記: TXで "[TX] SD init FAIL" が出る場合は sleep_eval 用TXではなく旧SD版TXをフラッシュしている可能性が高い。sleep_eval用TXはSD不使用・BLE名=TX_SLEEP_EVAL/ManufacturerData=0000_DUMMY で識別。
- [16:45 JST] sleep_eval_scan90 取得データを集計: sleep_eval_scan90/data/{100,2000}/TX のTXSDログから mean_p_mW を抽出し、interval別の集計CSVと図を生成（sleep_eval_scan90/analysis/summarize_txsd_power.py）。結果: 100ms mean_p≈200.80mW(n=2)、2000ms mean_p≈178.74mW(n=5)、差分≈-22.06mW（約-11%）。途中終了ファイル（trial_064_on.csv）は除外。成果物: sleep_eval_scan90/metrics/{txsd_power_trials.csv,txsd_power_summary.csv,summary.md}, sleep_eval_scan90/plots/txsd_power_summary.png, sleep_eval_scan90/data/README.md。
